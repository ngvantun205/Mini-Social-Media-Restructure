@using Microsoft.AspNetCore.Identity
@using System.Security.Claims
@inject UserManager<User> UserManager
@inject IHashtagService _hashtagService
@{
    User? currentUser = null;
    if (User.Identity != null && User.Identity.IsAuthenticated) {
        currentUser = await UserManager.GetUserAsync(User);
    }
    var userId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;
    var topHashtag = await _hashtagService.GetTopHashtag();
}
<div class="right-sidebar">
    <!-- Current User Card -->
    <div class="sidebar-section">
        <div class="current-user-card">
            <img src="@currentUser.AvatarUrl" alt="User">
            <p class="current-user-name">@currentUser.FullName</p>
            <p class="current-user-handle">@currentUser.UserName</p>
            <a asp-controller="Profile" asp-action="MyProfile" class="view-profile-btn">View Profile</a>
        </div>
    </div>

    <!-- Suggested Users -->
    <div class="sidebar-section">
        <div class="sidebar-section-header">
            <h3 class="sidebar-section-title">Suggested for you</h3>
            <a href="/suggestions" class="see-all">See All</a>
        </div>

        <div class="suggested-user">
            <img src="/images/user1.jpg" alt="Sarah Connor" class="suggested-user-avatar" data-username="sarahconnor">
            <div class="suggested-user-info">
                <p class="suggested-user-name" data-username="sarahconnor">Sarah Connor</p>
                <p class="suggested-user-mutual">5 mutual friends</p>
            </div>
            <button class="follow-btn" data-user-id="123">Follow</button>
        </div>

        <div class="suggested-user">
            <img src="/images/user2.jpg" alt="Mike Johnson" class="suggested-user-avatar" data-username="mikej">
            <div class="suggested-user-info">
                <p class="suggested-user-name" data-username="mikej">Mike Johnson</p>
                <p class="suggested-user-mutual">12 mutual friends</p>
            </div>
            <button class="follow-btn" data-user-id="124">Follow</button>
        </div>

        <div class="suggested-user">
            <img src="/images/user3.jpg" alt="Emma Wilson" class="suggested-user-avatar" data-username="emmaw">
            <div class="suggested-user-info">
                <p class="suggested-user-name" data-username="emmaw">Emma Wilson</p>
                <p class="suggested-user-mutual">8 mutual friends</p>
            </div>
            <button class="follow-btn" data-user-id="125">Follow</button>
        </div>

        <div class="suggested-user">
            <img src="/images/user4.jpg" alt="David Lee" class="suggested-user-avatar" data-username="davidlee">
            <div class="suggested-user-info">
                <p class="suggested-user-name" data-username="davidlee">David Lee</p>
                <p class="suggested-user-mutual">3 mutual friends</p>
            </div>
            <button class="follow-btn" data-user-id="126">Follow</button>
        </div>
    </div>

    <!-- Trending Hashtags -->
    <div class="sidebar-section">
        <div class="sidebar-section-header">
            <h3 class="sidebar-section-title">Trending Now</h3>
            <a href="/explore/trending" class="see-all">See All</a>
        </div>
        @foreach (var hashtag in topHashtag) {
            <div class="hashtag-item">
                <p class="hashtag-name">@hashtag.HashtagName</p>
            <p class="hashtag-count">@hashtag.UsageCount posts</p>
        </div>
        }
    </div>

    <!-- Trending Reels -->
    <div class="sidebar-section">
        <div class="sidebar-section-header">
            <h3 class="sidebar-section-title">Hot Reels</h3>
            <a href="/reels" class="see-all">See All</a>
        </div>

        <div class="trending-reel" data-reel-id="1">
            <img src="/images/reel1.jpg" alt="Reel">
            <div class="trending-reel-overlay">
                <div class="trending-reel-views">
                    <i class="fas fa-play"></i>
                    <span>2.3M</span>
                </div>
            </div>
        </div>

        <div class="trending-reel" data-reel-id="2">
            <img src="/images/reel2.jpg" alt="Reel">
            <div class="trending-reel-overlay">
                <div class="trending-reel-views">
                    <i class="fas fa-play"></i>
                    <span>1.8M</span>
                </div>
            </div>
        </div>

        <div class="trending-reel" data-reel-id="3">
            <img src="/images/reel3.jpg" alt="Reel">
            <div class="trending-reel-overlay">
                <div class="trending-reel-views">
                    <i class="fas fa-play"></i>
                    <span>1.5M</span>
                </div>
            </div>
        </div>
    </div>
</div>