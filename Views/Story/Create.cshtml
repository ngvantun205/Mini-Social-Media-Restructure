@model Mini_Social_Media.Models.InputModel.StoryInputModel
@{
    ViewData["Title"] = "Create Story";
    Layout = "_Layout";
}

<link rel="stylesheet" href="~/css/story-create.css" />

<div class="story-container">
    <div class="container-fluid">
        <div class="row justify-content-center align-items-center" style="min-height: 100vh;">
            <div class="col-12">
                <div class="story-card">
                    <div class="story-header">
                        <h4>✨ Create Your Story</h4>
                    </div>

                    <div class="card-body p-4">
                        <form asp-controller="Story" asp-action="Create" method="post" enctype="multipart/form-data" id="createStoryForm">

                            <div class="row g-4">
                                <!-- Left Side - Upload Area -->
                                <div class="col-lg-7">
                                    <div class="upload-zone" onclick="document.getElementById('StoryMedia').click()">

                                        <div id="uploadPlaceholder" class="upload-placeholder">
                                            <div class="upload-icon">
                                                <i class="fas fa-cloud-upload-alt"></i>
                                            </div>
                                            <p class="upload-text mb-2">Click to upload media</p>
                                            <small class="upload-hint">JPG, PNG, MP4 • Max 50MB</small>
                                        </div>

                                        <img id="imagePreview" src="" style="display: none;">
                                        <video id="videoPreview" src="" style="display: none;" controls></video>
                                    </div>
                                </div>

                                <!-- Right Side - Caption & Actions -->
                                <div class="col-lg-5">
                                    <div class="d-flex flex-column h-100">
                                        <div class="form-floating mb-4 flex-grow-1">
                                            <textarea asp-for="Caption" class="form-control h-100" placeholder="Write something..." style="min-height: 200px; resize: none;"></textarea>
                                            <label asp-for="Caption">💭 Write something... (Optional)</label>
                                        </div>

                                        <input asp-for="StoryMedia" type="file" accept="image/*,video/*" class="d-none" onchange="previewFile(this)">

                                        <div class="d-grid gap-3">
                                            <button type="submit" class="btn btn-share" id="btnSubmit">
                                                <i class="fas fa-paper-plane me-2"></i>Share to Story
                                            </button>
                                            <a href="/" class="btn btn-cancel text-decoration-none">
                                                <i class="fas fa-times me-2"></i>Cancel
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/create-story.js"></script>
}